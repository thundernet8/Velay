{"version":3,"file":"index.js","sources":["../../src/lib/vue-class-component/reflect.ts","../../src/lib/vue-class-component/util.ts","../../src/lib/vue-class-component/data.ts","../../src/lib/vue-class-component/component.ts","../../src/core/config/index.ts","../../src/core/utils/debugger.ts","../../src/core/injection/constant.ts","../../src/core/helper/velayError.ts","../../src/core/injection/injector.ts","../../src/core/injection/staticInjector.ts","../../src/core/utils/reflection.ts","../../src/core/store/mobx.ts","../../src/core/component/decotator.ts","../../src/core/injection/injectable.ts","../../src/core/component/vue-component.ts","../../src/index.ts"],"sourcesContent":["import Vue, { VueConstructor } from 'vue';\nimport { VueClass } from './declarations';\n\n// The rational behind the verbose Reflect-feature check below is the fact that there are polyfills\n// which add an implementation for Reflect.defineMetadata but not for Reflect.getOwnMetadataKeys.\n// Without this check consumers will encounter hard to track down runtime errors.\nexport const reflectionIsSupported =\n    typeof Reflect !== 'undefined' && Reflect.defineMetadata && Reflect.getOwnMetadataKeys;\n\nexport function copyReflectionMetadata(to: VueConstructor, from: VueClass<Vue>) {\n    forwardMetadata(to, from);\n\n    Object.getOwnPropertyNames(from.prototype).forEach(key => {\n        forwardMetadata(to.prototype, from.prototype, key);\n    });\n\n    Object.getOwnPropertyNames(from).forEach(key => {\n        forwardMetadata(to, from, key);\n    });\n}\n\nfunction forwardMetadata(to: object, from: object, propertyKey?: string): void {\n    const metaKeys = propertyKey ? Reflect.getOwnMetadataKeys(from, propertyKey) : Reflect.getOwnMetadataKeys(from);\n\n    metaKeys.forEach(metaKey => {\n        const metadata = propertyKey\n            ? Reflect.getOwnMetadata(metaKey, from, propertyKey)\n            : Reflect.getOwnMetadata(metaKey, from);\n\n        if (propertyKey) {\n            Reflect.defineMetadata(metaKey, metadata, to, propertyKey);\n        } else {\n            Reflect.defineMetadata(metaKey, metadata, to);\n        }\n    });\n}\n","import Vue, { ComponentOptions } from 'vue';\nimport { VueClass, DecoratedClass } from './declarations';\n\n// tslint:disable-next-line:no-empty\nexport const noop = () => {};\n\nconst fakeArray = { __proto__: [] };\nexport const hasProto = fakeArray instanceof Array;\n\nexport interface VueDecorator {\n    // Class decorator\n    (Ctor: typeof Vue): void;\n\n    // Property decorator\n    (target: Vue, key: string): void;\n\n    // Parameter decorator\n    // tslint:disable-next-line:unified-signatures\n    (target: Vue, key: string, index: number): void;\n}\n\nexport function createDecorator(\n    factory: (options: ComponentOptions<Vue>, key: string, index: number) => void\n): VueDecorator {\n    return (target: Vue | typeof Vue, key?: any, index?: any) => {\n        const Ctor = typeof target === 'function' ? (target as DecoratedClass) : (target.constructor as DecoratedClass);\n        if (!Ctor.__decorators__) {\n            Ctor.__decorators__ = [];\n        }\n        if (typeof index !== 'number') {\n            index = undefined;\n        }\n        Ctor.__decorators__.push(options => factory(options, key, index));\n    };\n}\n\nexport function mixins<A>(CtorA: VueClass<A>): VueClass<A>;\nexport function mixins<A, B>(CtorA: VueClass<A>, CtorB: VueClass<B>): VueClass<A & B>;\nexport function mixins<A, B, C>(CtorA: VueClass<A>, CtorB: VueClass<B>, CtorC: VueClass<C>): VueClass<A & B & C>;\nexport function mixins<A, B, C, D>(\n    CtorA: VueClass<A>,\n    CtorB: VueClass<B>,\n    CtorC: VueClass<C>,\n    CtorD: VueClass<D>\n): VueClass<A & B & C & D>;\nexport function mixins<A, B, C, D, E>(\n    CtorA: VueClass<A>,\n    CtorB: VueClass<B>,\n    CtorC: VueClass<C>,\n    CtorD: VueClass<D>,\n    CtorE: VueClass<E>\n): VueClass<A & B & C & D & E>;\nexport function mixins<T>(...Ctors: VueClass<Vue>[]): VueClass<T>;\nexport function mixins(...Ctors: VueClass<Vue>[]): VueClass<Vue> {\n    return Vue.extend({ mixins: Ctors });\n}\n\nexport function isPrimitive(value: any): boolean {\n    const type = typeof value;\n    return value == null || (type !== 'object' && type !== 'function');\n}\n\nexport function warn(message: string): void {\n    if (typeof console !== 'undefined') {\n        console.warn('[vue-class-component] ' + message);\n    }\n}\n","import Vue from 'vue';\nimport { isObservable } from 'mobx';\nimport { VueClass } from './declarations';\nimport { warn } from './util';\n\nexport function collectDataFromConstructor(vm: Vue, Component: VueClass<Vue>) {\n    // override _init to prevent to init as Vue instance\n    const originalInit = Component.prototype._init;\n    Component.prototype._init = function(this: Vue) {\n        // proxy to actual vm\n        const keys = Object.getOwnPropertyNames(vm);\n        // 2.2.0 compat (props are no longer exposed as self properties)\n        if (vm.$options.props) {\n            for (const key in vm.$options.props) {\n                if (!vm.hasOwnProperty(key)) {\n                    keys.push(key);\n                }\n            }\n        }\n        keys.forEach(key => {\n            if (key.charAt(0) !== '_') {\n                Object.defineProperty(this, key, {\n                    get: () => (vm as any)[key],\n                    set: value => {\n                        (vm as any)[key] = value;\n                    },\n                    configurable: true\n                });\n            }\n        });\n    };\n\n    // should be acquired class property values\n    const data = new Component();\n\n    // restore original _init to avoid memory leak (#209)\n    Component.prototype._init = originalInit;\n\n    // create plain data object\n    const plainData = {};\n    Object.keys(data).forEach(key => {\n        if ((data as any)[key] !== undefined && !isObservable((data as any)[key])) {\n            (plainData as any)[key] = (data as any)[key];\n        }\n    });\n\n    if (process.env.NODE_ENV !== 'production') {\n        if (!(Component.prototype instanceof Vue) && Object.keys(plainData).length > 0) {\n            warn('Component class must inherit Vue or its descendant class ' + 'when class property is used.');\n        }\n    }\n\n    return plainData;\n}\n","import Vue, { ComponentOptions } from 'vue';\nimport { isObservable } from 'mobx';\nimport { copyReflectionMetadata, reflectionIsSupported } from './reflect';\nimport { VueClass, DecoratedClass } from './declarations';\nimport { collectDataFromConstructor } from './data';\nimport { hasProto, isPrimitive, warn } from './util';\n\nexport const $internalHooks = [\n    'data',\n    'beforeCreate',\n    'created',\n    'beforeMount',\n    'mounted',\n    'beforeDestroy',\n    'destroyed',\n    'beforeUpdate',\n    'updated',\n    'activated',\n    'deactivated',\n    'render',\n    'errorCaptured', // 2.5\n    'serverPrefetch' // 2.6\n];\n\nexport function componentFactory(Component: VueClass<Vue>, options: ComponentOptions<Vue> = {}): VueClass<Vue> {\n    options.name = options.name || (Component as any)._componentTag || (Component as any).name;\n    // prototype props.\n    const proto = Component.prototype;\n    Object.getOwnPropertyNames(proto).forEach(function(key) {\n        if (key === 'constructor') {\n            return;\n        }\n\n        // hooks\n        if ($internalHooks.indexOf(key) > -1) {\n            (options as any)[key] = proto[key];\n            return;\n        }\n        const descriptor = Object.getOwnPropertyDescriptor(proto, key)!;\n        if (descriptor.value !== void 0) {\n            // methods\n            if (typeof descriptor.value === 'function') {\n                (options.methods || (options.methods = {}))[key] = descriptor.value;\n            } else {\n                // typescript decorated data\n                (options.mixins || (options.mixins = [])).push({\n                    data(this: Vue) {\n                        return { [key]: descriptor.value };\n                    }\n                });\n            }\n        } else if (descriptor.get || descriptor.set) {\n            // computed properties\n            (options.computed || (options.computed = {}))[key] = {\n                get: descriptor.get,\n                set: descriptor.set\n            };\n        }\n    });\n\n    // add data hook to collect class properties as Vue instance's data\n    (options.mixins || (options.mixins = [])).push({\n        data(this: Vue) {\n            return collectDataFromConstructor(this, Component);\n        }\n    });\n\n    // decorate options\n    const decorators = (Component as DecoratedClass).__decorators__;\n    if (decorators) {\n        decorators.forEach(fn => fn(options));\n        delete (Component as DecoratedClass).__decorators__;\n    }\n\n    // find super\n    const superProto = Object.getPrototypeOf(Component.prototype);\n    const Super = superProto instanceof Vue ? (superProto.constructor as VueClass<Vue>) : Vue;\n    const Extended = Super.extend(options);\n\n    forwardStaticMembers(Extended, Component, Super);\n\n    if (reflectionIsSupported) {\n        copyReflectionMetadata(Extended, Component);\n    }\n\n    return Extended;\n}\n\nconst reservedPropertyNames = [\n    // Unique id\n    'cid',\n\n    // Super Vue constructor\n    'super',\n\n    // Component options that will be used by the component\n    'options',\n    'superOptions',\n    'extendOptions',\n    'sealedOptions',\n\n    // Private assets\n    'component',\n    'directive',\n    'filter'\n];\n\nfunction forwardStaticMembers(Extended: typeof Vue, Original: typeof Vue, Super: typeof Vue): void {\n    // We have to use getOwnPropertyNames since Babel registers methods as non-enumerable\n    Object.getOwnPropertyNames(Original).forEach(key => {\n        // `prototype` should not be overwritten\n        if (key === 'prototype') {\n            return;\n        }\n\n        // Some browsers does not allow reconfigure built-in properties\n        const extendedDescriptor = Object.getOwnPropertyDescriptor(Extended, key);\n        if (extendedDescriptor && !extendedDescriptor.configurable) {\n            return;\n        }\n\n        const descriptor = Object.getOwnPropertyDescriptor(Original, key)!;\n\n        // If the user agent does not support `__proto__` or its family (IE <= 10),\n        // the sub class properties may be inherited properties from the super class in TypeScript.\n        // We need to exclude such properties to prevent to overwrite\n        // the component options object which stored on the extended constructor (See #192).\n        // If the value is a referenced value (object or function),\n        // we can check equality of them and exclude it if they have the same reference.\n        // If it is a primitive value, it will be forwarded for safety.\n        if (!hasProto) {\n            // Only `cid` is explicitly exluded from property forwarding\n            // because we cannot detect whether it is a inherited property or not\n            // on the no `__proto__` environment even though the property is reserved.\n            if (key === 'cid') {\n                return;\n            }\n\n            const superDescriptor = Object.getOwnPropertyDescriptor(Super, key);\n\n            if (!isPrimitive(descriptor.value) && superDescriptor && superDescriptor.value === descriptor.value) {\n                return;\n            }\n        }\n\n        // Warn if the users manually declare reserved properties\n        if (process.env.NODE_ENV !== 'production' && reservedPropertyNames.indexOf(key) >= 0) {\n            warn(\n                `Static property name '${key}' declared on class '${Original.name}' ` +\n                    'conflicts with reserved property name of Vue internal. ' +\n                    'It may cause unexpected behavior of the component. Consider renaming the property.'\n            );\n        }\n\n        Object.defineProperty(Extended, key, descriptor);\n    });\n}\n","const Config = {\n    debug: false\n};\n\nexport default Config;\n","// TODO env and log level\nimport Config from '../config';\n\nexport default class Debugger {\n    private static get _prefixedMsg() {\n        const datetime = new Date();\n        return `[${datetime.toJSON().slice(0, 10)} ${datetime.toTimeString().slice(0, 8)}][Velay:Core] `;\n    }\n\n    private static _shouldOutput() {\n        return !!Config.debug;\n    }\n\n    static output(type: string, args: any[]) {\n        if (!Debugger._shouldOutput()) {\n            return;\n        }\n        const fn = (console as any)[type];\n        return fn && fn(Debugger._prefixedMsg, ...args);\n    }\n\n    static warn(...args: any[]) {\n        return Debugger.output('warn', args);\n    }\n\n    static log(...args: any[]) {\n        return Debugger.output('log', args);\n    }\n\n    static error(...args: any[]) {\n        return Debugger.output('error', args);\n    }\n}\n","export const EMPTY = 'Velay:EMPTY';\n\nexport const CIRCULAR = 'Velay:CIRCULAR';\n\nexport const INJECTABLE_FLAG = 'Velay:Injectable';\n\nexport const INJECTION_CACHEABLE_FLAG = 'Velay:InjectionCacheable';\n","export default class VelayError extends Error {\n    constructor(msg?: string) {\n        const mergedMsg = `[Velay:Core] ${msg || ''}`;\n        super(mergedMsg);\n    }\n}\n","import { TConstructor, ProviderRecord } from '../../types/internal';\nimport { INJECTABLE_FLAG, CIRCULAR, EMPTY } from './constant';\nimport Debugger from '../utils/debugger';\nimport VelayError from '../helper/velayError';\n\nexport default class Injector {\n    private readonly _records: Map<any, ProviderRecord>;\n\n    private constructor() {\n        this._records = new Map<any, ProviderRecord>();\n    }\n\n    static create(): Injector {\n        return new Injector();\n    }\n\n    static checkInjectable(token: TConstructor): boolean {\n        const injectable = Reflect.getMetadata(INJECTABLE_FLAG, token) === true;\n        if (!injectable) {\n            throw new VelayError(`${token.name} is not injectable, do you forgot add the 'Injectable' decorator?`);\n        }\n\n        return true;\n    }\n\n    registerProvider(...providers: ProviderRecord[]): this {\n        providers.forEach(provider => {\n            if (this._records.has(provider.token)) {\n                Debugger.warn(`Provider of ${provider.token.name} has been registered already.`);\n            } else {\n                Debugger.log(`Provider of ${provider.token.name} is registered now.`);\n            }\n            if (provider.value === undefined) {\n                provider.value = EMPTY;\n            }\n            this._records.set(provider.token, provider);\n        });\n        return this;\n    }\n\n    resolve<T>(token: TConstructor<T>): T {\n        Injector.checkInjectable(token);\n        // TODO maybe constuctor with 0 params can be resolved.\n        // const subParamTypes = Reflect.getMetadata('design:paramtypes', token) || [];\n        // if (subParamTypes.length > 0) {\n        //     return null;\n        // }\n\n        const record = this._records.get(token);\n        if (!record) {\n            throw new VelayError(`${token.name} is not registered in injector`);\n        }\n\n        try {\n            const value = this._resolveToken<T>(record);\n            if (record.value === CIRCULAR) {\n                record.value = EMPTY;\n            }\n            return value;\n        } catch (e) {\n            if (!(e instanceof Error)) {\n                // tslint:disable-next-line:no-ex-assign\n                e = new VelayError(e);\n            }\n            if (!(e instanceof VelayError)) {\n                // tslint:disable-next-line:no-ex-assign\n                e = new VelayError(e.message);\n            }\n            if (record.value === CIRCULAR) {\n                record.value = EMPTY;\n            }\n            throw e;\n        }\n    }\n\n    _resolveToken<T>(record: ProviderRecord): T {\n        const fn = record.token;\n        let value = record.value;\n        if (value === CIRCULAR) {\n            throw new VelayError('Circular dependency');\n        } else if (value === EMPTY) {\n            record.value = CIRCULAR;\n            let deps = [];\n            const paramTypes = Reflect.getMetadata('design:paramtypes', record.token) || [];\n            for (let i = 0; i < paramTypes.length; i++) {\n                const paramType = paramTypes[i];\n                deps.push(this.resolve<any>(paramType));\n            }\n            value = new (fn as any)(...deps);\n            if (record.cacheable) {\n                record.value = value;\n            }\n        }\n\n        return value;\n    }\n\n    has(token: TConstructor): boolean {\n        return this._records.has(token);\n    }\n\n    list(): ProviderRecord[] {\n        return Array.from(this._records.values());\n    }\n\n    toString() {\n        const tokens: string[] = [];\n        const records = this._records;\n        records.forEach((v, token) => tokens.push(token.name || token.toString()));\n        return `Injector[${tokens.join(', ')}]`;\n    }\n}\n","import Injector from './injector';\nimport { ProviderRecord, TConstructor } from '../../types/internal';\n\nexport default class StaticInjector {\n    private constructor() {\n        throw new Error('StaticInjector is not constructable');\n    }\n\n    private static readonly _injector: Injector = Injector.create();\n\n    static registerProvider(...providers: ProviderRecord[]) {\n        return StaticInjector._injector.registerProvider(...providers);\n    }\n\n    static resolve<T>(token: TConstructor<T>): T {\n        return StaticInjector._injector.resolve<T>(token);\n    }\n\n    static has(token: TConstructor): boolean {\n        return StaticInjector._injector.has(token);\n    }\n\n    static list(): ProviderRecord[] {\n        return StaticInjector._injector.list();\n    }\n\n    static toString() {\n        return `Static${StaticInjector._injector.toString()}`;\n    }\n}\n","import { TConstructor } from '../../types/internal';\nimport Debugger from './debugger';\nimport StaticInjector from '../injection/staticInjector';\n\nexport function getInjectedConstructor(target: TConstructor): TConstructor | null {\n    const paramTypes = Reflect.getMetadata('design:paramtypes', target) || [];\n    const params: any[] = [];\n    for (let i = 0; i < paramTypes.length; i++) {\n        const paramType = paramTypes[i];\n        if (typeof paramType !== 'function') {\n            Debugger.warn(`pamameter ${i + 1} of ${target.name} is not a constructor`);\n            return null;\n        }\n        if (paramType === Object || paramType === Function) {\n            Debugger.warn(`pamameter ${i + 1} of ${target.name} is not a valid constructor`);\n            return null;\n        }\n\n        if (!StaticInjector.has(paramType)) {\n            Debugger.warn(`${paramType.name} cannot be resolved`);\n            const subParamTypes = Reflect.getMetadata('design:paramtypes', paramType) || [];\n            if (subParamTypes.length === 0) {\n                params.push(new paramType());\n            } else {\n                params.push(undefined);\n            }\n        } else {\n            params.push(StaticInjector.resolve(paramType));\n        }\n    }\n    const InjectedConstructor: any = function() {\n        return new target(...params);\n    };\n\n    InjectedConstructor.prototype = target.prototype;\n    Object.defineProperty(InjectedConstructor, 'name', {\n        writable: false,\n        configurable: false,\n        value: target.name\n    });\n\n    return InjectedConstructor;\n}\n","import Vue from 'vue';\nimport { isObservable, Reaction } from 'mobx';\nimport { DefaultData } from 'vue/types/options';\nimport { VueClass } from '../../lib/vue-class-component/declarations';\n\n// tslint:disable-next-line:no-empty\nconst noop = () => {};\nconst DISPOSE_REACTIVE = 'Velay:DISPOSE_REACTIVE';\n\n// from mobx-vue\n\nexport function collectData(vm: Vue, data?: DefaultData<Vue>) {\n    const dataValues = typeof data === 'function' ? data.call(vm, vm) : data || {};\n    const filteredValues = Object.keys(dataValues).reduce((prev: any, curr) => {\n        const value = dataValues[curr];\n        if (isObservable(value)) {\n            Object.defineProperty(vm, curr, {\n                configurable: true,\n                get() {\n                    return value;\n                },\n                set() {\n                    // ignore vue set\n                }\n            });\n        } else {\n            prev[curr] = value;\n        }\n\n        return prev;\n    }, {});\n\n    return filteredValues;\n}\n\nexport function reactiveComponent(name: string, Component: VueClass<Vue>) {\n    const { $mount, $destory } = Component.prototype;\n    Component.prototype.$mount = function(...args: any[]) {\n        const vm = this;\n        let mounted = false;\n        let originalRender: any;\n        vm[DISPOSE_REACTIVE] = noop;\n\n        const reactiveRender = () => {\n            reaction.track(() => {\n                if (!mounted) {\n                    $mount.call(vm, ...args);\n                    mounted = true;\n                    originalRender = vm._watcher.getter;\n                    vm._watcher.getter = reactiveRender;\n                } else {\n                    originalRender.call(vm, vm);\n                }\n            });\n\n            return vm;\n        };\n\n        const reaction = new Reaction(`${name}.render()`, reactiveRender);\n\n        vm[DISPOSE_REACTIVE] = reaction.getDisposer();\n\n        return reactiveRender();\n    };\n\n    Component.prototype.$destory = function(vm: any) {\n        vm[DISPOSE_REACTIVE]();\n        $destory.apply(vm);\n    };\n\n    return Component;\n}\n","import Vue, { ComponentOptions } from 'vue';\nimport { Inject, Model, Prop, Emit, Provide, Watch } from 'vue-property-decorator';\nimport { VueClass } from '../../lib/vue-class-component/declarations';\nimport { componentFactory, $internalHooks } from '../../lib/vue-class-component/component';\nimport { getInjectedConstructor } from '../utils/reflection';\nimport { collectData, reactiveComponent } from '../store/mobx';\nimport { TConstructor } from '../../types/internal';\n\ninterface IComponentOptions extends ComponentOptions<Vue> {}\n\nlet componentId = 1;\n\n// tslint:disable-next-line:no-empty\nconst noop = () => {};\n\nfunction getComponentName(options: IComponentOptions | VueClass<Vue>, component?: VueClass<Vue>) {\n    if (typeof options === 'object' && options.name) {\n        return options.name;\n    }\n    if (typeof options === 'function' && (options as any).options && (options as any).options.name) {\n        return (options as any).options.name;\n    }\n    let klass: VueClass<Vue> = (component || options) as VueClass<Vue>;\n    const constructorName = klass.name || (klass.constructor && Component.constructor.name);\n    return constructorName || `VueComponent${componentId++}`;\n}\n\nfunction injectService(Component: TConstructor) {\n    const instance = new Component();\n    const vueInstance = new Vue();\n    Vue.mixin({\n        beforeCreate() {\n            const vuePropKeys = Object.getOwnPropertyNames(vueInstance);\n            const paramKeys = Object.getOwnPropertyNames(instance).filter(k => !vuePropKeys.includes(k));\n            paramKeys.forEach(key => {\n                // auto injected services must be functions\n                if (typeof instance[key] === 'function') {\n                    (this as any)[key] = instance[key];\n                }\n            });\n        }\n    });\n}\n\nfunction assembleComponent(Component: VueClass<Vue>, options: IComponentOptions) {\n    const name = getComponentName(options, Component);\n    const target = getInjectedConstructor(Component);\n    if (!target) {\n        throw new Error(`${Component.name} dependency injection failed`);\n    }\n    (target as any).__decorators__ = (options as any).__decorators__;\n    injectService(target);\n    return reactiveComponent(name, componentFactory(target as any, { ...options, name }));\n}\n\nfunction Component<V extends Vue>(options: IComponentOptions & ThisType<V>): <VC extends VueClass<V>>(target: VC) => VC;\nfunction Component<VC extends VueClass<Vue>>(target: VC): VC;\nfunction Component(options: IComponentOptions | VueClass<Vue>): any {\n    // const originalOptions = typeof options === 'function' ? (options as any).options : options;\n    // const combineOptions = {\n    //     ...originalOptions,\n    //     // data: (vm: Vue) => collectData(vm, originalOptions.data),\n    //     _Ctor: {}\n    // };\n    if (typeof options === 'function') {\n        return assembleComponent(options, { _Ctor: {} } as any);\n    }\n    return function(Component: VueClass<Vue>) {\n        return assembleComponent(Component, { ...options, _Ctor: {} } as any);\n    };\n}\n\nfunction registerHooks(keys: string[]): void {\n    $internalHooks.push(...keys);\n}\n\nComponent.registerHooks = registerHooks;\n\nexport { Inject, Model, Prop, Emit, Provide, Watch, Component, registerHooks };\n","import 'reflect-metadata';\nimport { TConstructor, InjectableOptions } from '../../types/internal';\nimport StaticInjector from './staticInjector';\nimport { EMPTY, INJECTABLE_FLAG, INJECTION_CACHEABLE_FLAG } from './constant';\n\nconst DEFAULT_INJECTABLE_OPTIONS: InjectableOptions = {\n    cacheable: true\n};\n\nexport default function Injectable(options?: InjectableOptions | TConstructor): any {\n    let mergedOptions: any;\n    if (typeof options === 'function') {\n        mergedOptions = DEFAULT_INJECTABLE_OPTIONS;\n        Reflect.defineMetadata(INJECTABLE_FLAG, true, options);\n        StaticInjector.registerProvider({\n            token: options,\n            cacheable: mergedOptions.cacheable,\n            value: EMPTY\n        });\n        return options;\n    }\n    mergedOptions = Object.assign({}, DEFAULT_INJECTABLE_OPTIONS, options || {});\n    return function(target: TConstructor) {\n        // const paramTypes = Reflect.getMetadata('design:paramtypes', target);\n        Reflect.defineMetadata(INJECTABLE_FLAG, true, target);\n        // Reflect.defineMetadata(INJECTION_CACHEABLE_FLAG, mergedOptions.cacheable, target);\n        // Reflect.defineMetadata(INJECTED_PARAMS_METADATA_KEY, paramTypes, target);\n        StaticInjector.registerProvider({\n            token: target,\n            cacheable: mergedOptions.cacheable,\n            value: EMPTY\n        });\n    } as any;\n}\n","import Vue from 'vue';\nimport { DefaultProps } from 'vue/types/options';\nimport { InternalJSX } from '../../types/jsx';\n\n// type Readonly<T> = { readonly [P in keyof T]: T[P] };\n\nexport default class VueComponent<T extends DefaultProps> extends Vue {\n    // tslint:disable-next-line:variable-name\n    private _props_: InternalJSX.ElementAttrs<T> = {} as any;\n}\n","import Vue from 'vue';\n\n/**\n * Decorators\n */\nimport { Inject, Model, Prop, Emit, Provide, Watch, Component, registerHooks } from './core/component/decotator';\nimport Injectable from './core/injection/injectable';\n\n/**\n * Base Component Class\n */\nimport VueComponent from './core/component/vue-component';\n\n/**\n * Injector\n */\nimport StaticInjector from './core/injection/staticInjector';\nimport Injector from './core/injection/injector';\n\n/**\n * Config\n */\nimport Config from './core/config';\n\nexport {\n    Inject,\n    Model,\n    Prop,\n    Emit,\n    Provide,\n    Watch,\n    Component,\n    registerHooks,\n    Injectable,\n    VueComponent,\n    Vue,\n    StaticInjector,\n    Injector\n};\n\nconst Velay = {\n    Inject,\n    Model,\n    Prop,\n    Emit,\n    Provide,\n    Watch,\n    Component,\n    registerHooks,\n    Injectable,\n    VueComponent,\n    Vue,\n    StaticInjector,\n    Injector,\n    version: '',\n    config: {},\n    providers: []\n};\n\nObject.defineProperty(Velay, 'config', {\n    configurable: false,\n    writable: false,\n    value: Config\n});\n\nObject.defineProperty(Velay, 'version', {\n    configurable: false,\n    writable: false,\n    value: '0.0.1'\n});\n\nObject.defineProperty(Velay, 'providers', {\n    configurable: false,\n    get() {\n        return StaticInjector.list();\n    }\n});\n\nexport default Velay;\n"],"names":["isObservable","tslib_1.__extends","noop","Reaction","tslib_1.__assign"],"mappings":"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"}